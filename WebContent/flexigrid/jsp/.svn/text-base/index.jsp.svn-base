<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FlexiGrid</title>


<link href="/nmdss/themes/classic/css/si-tech/html_css.css" rel="stylesheet" type="text/css" />

<link href="/nmdss/sang/css/flexigrid.css" type="text/css" rel="stylesheet" />
<link href="/nmdss/sang/css/contextmenu.css" type="text/css" rel="stylesheet"  />
<script src="/nmdss/sang/js/jquery-1.4.2.js" type="text/javascript"></script>
<script src="/nmdss/sang/js/jquery.contextmenu.js" type="text/javascript"></script>
<script src="/nmdss/sang/js/jquery.flexigrid.js" type="text/javascript" ></script>
<script type="text/javascript">
	$(document)
			.ready(function() {

 				//alert('dddddddddddd');
				var maiheight = document.documentElement.clientHeight;
				var w = $("#ptable").width() - 3;
				var gapTop = 30;
				var otherpm = 150; //GridHead，toolbar，footer,gridmargin
					var h = maiheight - gapTop - otherpm;


				var qsql = $("#queryFormSql").val();
				//alert(qsql);
					//alert('dddddddddddd');
					
					var grid = $("#flex1")
							.flexigrid(
									{
										width : w,
										height: 50,
										url : '/nmdss/queryController?action=list&qString=id@attr_name',
										dataType : 'json',
										colModel : [ {
											display : 'id',
											name : 'id',
											width : 50,
											sortable : true,
											align : 'center',
											toggle : false
										}, {
											display : 'attr_name',
											name : 'attr_name',
											width : 250,
											sortable : true,
											align : 'center'
										} ],
										
										searchitems : [ {
											display : '编号',
											name : 'id',
											isdefault : true
										}, {
											display : 'attr_name',
											name : 'attr_name'
										} ],
										errormsg : '发生异常',
										sortname : "id",
										querySql : "(select id,attr_name from nmdss_dss_table_attr )",
										sortorder : "desc",
										qop: "LIKE",//搜索的操作符
										usepager : true,
										title : '测试信息明细',
										pagestat : '显示记录从{from}到{to}，总数 {total} 条',
										useRp : true,
										rp : 1,
										rpOptions : [ 10, 15, 20, 30, 40, 100 ], //可选择设定的每页结果数
										nomsg : '没有符合条件的记录存在',
										minColToggle : 1, //允许显示的最小列数
										showTableToggleBtn : true,
										autoload : true, //自动加载，即第一次发起ajax请求
										resizable : false, //table是否可伸缩
										procmsg : '加载中, 请稍等 ...',
										hideOnSubmit : true, //是否在回调时显示遮盖
										blockOpacity : 0.5,//透明度设置
										showcheckbox : true,//是否显示第一列的checkbox（用于全选）
										gridClass : "bbit-grid",//样式
										//rowhandler : contextmenu,//是否启用行的扩展事情功能,在生成行时绑定事件，如双击，右键等
										rowbinddata : true,//配合上一个操作，如在双击事件中获取该行的数据
										onrowchecked : callme
									//在每一行的的checkbox选中状态发生变化时触发某个事件
									//onrowchecked: false//在每一行的的checkbox选中状态发生变化时触发某个事件
});

					var grid2 = $("#flex2")
					.flexigrid(  
							{
								width : w,
								height: 50,
								url : '/nmdss/queryController?action=list&qString=id@attr_name',
								dataType : 'json',
								colModel : [ {
									display : 'id',
									name : 'id',
									width : 50,
									sortable : true,
									align : 'center',
									toggle : false
								}, {
									display : 'attr_name',
									name : 'attr_name',
									width : 250,
									sortable : true,
									align : 'center'
								} ],
								
								searchitems : [ {
									display : '编号',
									name : 'id',
									isdefault : true
								}, {
									display : 'attr_name',
									name : 'attr_name'
								} ],
								errormsg : '发生异常',
								sortname : "id",
								querySql : "(select id,attr_name from nmdss_dss_table_attr )",
								sortorder : "desc",
								qop: "LIKE",//搜索的操作符
								usepager : true,
								title : '测试信息明细',
								pagestat : '显示记录从{from}到{to}，总数 {total} 条',
								useRp : true,
								rp : 1,
								rpOptions : [ 10, 15, 20, 30, 40, 100 ], //可选择设定的每页结果数
								nomsg : '没有符合条件的记录存在',
								minColToggle : 1, //允许显示的最小列数
								showTableToggleBtn : true,
								autoload : true, //自动加载，即第一次发起ajax请求
								resizable : false, //table是否可伸缩
								procmsg : '加载中, 请稍等 ...',
								hideOnSubmit : true, //是否在回调时显示遮盖
								blockOpacity : 0.5,//透明度设置
								showcheckbox : true,//是否显示第一列的checkbox（用于全选）
								gridClass : "bbit-grid",//样式
								rowhandler : contextmenu,//是否启用行的扩展事情功能,在生成行时绑定事件，如双击，右键等
								rowbinddata : true,//配合上一个操作，如在双击事件中获取该行的数据
								onrowchecked : callme
							//在每一行的的checkbox选中状态发生变化时触发某个事件
							//onrowchecked: false//在每一行的的checkbox选中状态发生变化时触发某个事件
});


					

				});
</script>
<style>
   
   .bbit-grid div.fbutton .add{
       	padding-left:20px;
        background: url(images/icons/add.png) no-repeat center left;
   }
   .bbit-grid div.fbutton .modify{
       padding-left:20px;
       background: url(images/icons/modify.png) no-repeat center left;
   }
   .bbit-grid div.fbutton .delete{
       padding-left:20px;
       background: url(images/icons/close.png) no-repeat center left;
   }
    
</style>
</head>
<body>
	<input type="button" value="me_sang_test"  > 
<fieldset>
	<form action="queryController?action=customQuery">
	开始日期<input type="text" name=''>
	结束日期<input type="text" name=''>
	
	<input type="text" id="queryFormSql" value="(select id,table_id from nmdss_dss_table_attr)">
	<input type="button" value="query" onclick="myclick();"> 
	</form>
</fieldset>

<div id="ptable" style="margin:10px">
	<table id="flex1" style="display:none"></table>
	<table id="flex2" style="display:none"></table>
</div>  
<input id="action" type="hidden" name="action" value="null" />
<input id="method" type="hidden" name="method" value="null" />
<script>
//alert('ssssss');



function callme() {
	//alert("aaaaaaaaa");
}
function contextmenu(row) {
  //alert(row.id);
  var menu = {
			width : 150,
			items : [
					{
						text : "1",
						icon : "/dss.report.virtual/images/icons/search.png",
						alias : "contextmenu-select",
						action : contextMenuItem
					},
					{
						text : "2",
						icon : "/dss.report.virtual/images/icons/search.png",
						alias : "contextmenu-view",
						action : contextMenuItem
					},
					{
						text : "编辑",
						icon : "/dss.report.virtual/images/icons/modify.png",
						alias : "contextmenu-modify",
						action : contextMenuItem
					},
					{
						text : "删除",
						icon : "/dss.report.virtual/images/icons/close.png",
						alias : "contextmenu-delete",
						action : contextMenuItem
					} ]
		};


		

		function contextMenuItem(target) {
			var id = $(target).attr("id").substr(3);
		 
			 
		}
		$(row).contextmenu(menu);
	//$(row).contextmenu(menu);
}


  
</script>

</body>
</html>