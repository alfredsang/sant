package cn.com.st.dss.utils;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.Map;

import cn.com.si.dss.dao.*;
import cn.com.st.dss.jdbc.DBConnection;

public class CheckboxCreatorUtil {

	/**
	 * 
	 * @param tableid
	 * @return
	 * @throws SQLException
	 * 
	 * 
	 * ATTR_NAME�������ģ�Ŀ���ǹ���sql����е�select
	 * 
	 */
	public static String SqlCheckboxCreator(String tableid,String fid) {
		String str = "";

		List list = new ArrayList();
		try {
			list = new TableAttrDao().getTableAllAttrByTableId(tableid);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		for (int j = 0; j < list.size(); j++) {

			Object v[] = new Object[] { ((Map) list.get(j)).get("ID"),
					((Map) list.get(j)).get("ATTR_VALUE"),
					((Map) list.get(j)).get("ISSHOW") ,
					((Map) list.get(j)).get("ATTR_NAME"),
					((Map) list.get(j)).get("SORTABLE"),
					((Map) list.get(j)).get("ALIGN"),
					((Map) list.get(j)).get("WIDTH"),
					((Map) list.get(j)).get("TOGGLE")
			};

			String attr = " attrValue='"+v[1].toString().trim()+"' SORTABLE='"+v[4].toString().trim()+"' PALIGN='"+v[5].toString().trim()+"' WIDTH='"+v[6].toString().trim()+"' TOGGLE='"+v[7].toString().trim()+"'";
			if (v[2].toString().equalsIgnoreCase("y")) {
				str = str
						+ "<input "+attr+" type='checkbox' name='"+tableid+"listTableFields"+fid+"' attrName='"+v[3].toString().trim()+"'  checked='checked' value='"
						+ v[0].toString().trim() + "'>" + v[1].toString().trim() + "&nbsp;&nbsp;";
			} else {
				str = str
						+ "<input "+attr+"  type='checkbox' name='"+tableid+"listTableFields"+fid+"'  attrName='"+v[3].toString().trim()+"'  value='"
						+ v[0].toString().trim() + "'>" + v[1].toString().trim() + "&nbsp;&nbsp;";
			}

			if (j % 5 == 0&&j>0) {
				str = str + "<br>";
			}

		}
		return str;
	}

	
	
	public static String KpiCheckboxCreator() {
		String str = "";

		List list = new ArrayList();
		try {
			list = new KpiDao().getAllKpi();
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		for (int j = 0; j < list.size(); j++) {

			Object v[] = new Object[] { ((Map) list.get(j)).get("MESR_ID"),
					((Map) list.get(j)).get("MESR_VALU")
			};

		 
				str = str
						+ "<input  type='checkbox' name='listMeasureFields' value='"
						+ v[0] + "'>" + v[1] + "&nbsp;&nbsp;";

			if (j % 5 == 0&&j>0) {
				str = str + "<br>";
			}

		}
		return str;
	}

	public static String MyFavCheckboxCreator(){
		String str = "";

		List list = new ArrayList();
		try {
			String sql = "select fav_table_id,fav_query_condition,fav_desc from nmdss_dss_mydata_fav a left join nmdss_dss_table  b on  a.fav_table_id = b.id where a.fav_category='table' and a.fav_status='1';";
			DBConnection db = new DBConnection();
			db.getCurrentConnection();
			list = db.executeQueryList(sql);
			
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		for (int j = 0; j < list.size(); j++) {

			Object v[] = new Object[] { ((Map) list.get(j)).get("FAV_TABLE_ID"),
					((Map) list.get(j)).get("FAV_QUERY_CONDITION"),
					((Map) list.get(j)).get("FAV_DESC")
			};

		 
				str = str
						+ "<input  type='checkbox' name='ckMyFavFields' value='"
						+ v[0] + "#" + v[1] + "'>" + v[2]+"#"+ v[0] + "#" + v[1]  + "&nbsp;&nbsp;";

			if (j % 5 == 0&&j>0) {
				str = str + "<br>";
			}

		}
		return str;
	}

	
	
	
	public static void main(String[] args) throws SQLException {
		//String a = CheckboxCreatorUtil.SqlCheckboxCreator("78");
		//System.out.println(a);
		String a = CheckboxCreatorUtil.MyFavCheckboxCreator();
		System.out.println(a);
	}

}
